#!/usr/bin/env python3

import sys, os
import pathlib

if __name__ == '__main__':
    if len(sys.argv) != 3:
        print("USAGE: ./cache_env")
        exit(1)
    HERMES_SCRIPTS_ROOT = str(pathlib.Path(__file__).parent.parent.resolve())
    lines = [
        "#!/bin/bash",
        f"export PATH={os.getenv('PATH')}",
        f"export LD_LIBRARY_PATH={os.getenv('LD_LIBRARY_PATH')}",
    ]
    text = "\n".join(lines)
    with open(f"{HERMES_SCRIPTS_ROOT}/.cache/env.sh") as fp:
        fp.write(text)